<!DOCTYPE HTML>
<html>

<head>
    <link href="https://cdn.bootcdn.net/ajax/libs/element-ui/2.15.13/theme-chalk/index.css" rel="stylesheet">
    <meta name="layoutmode" content="fitscreen">
    <meta http-equiv="cache-control" content="no-cache">
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
    <title>è´¢å¯Œè‡ªç”±ä¹‹è·¯</title>
<body>
    <div id="app">
    <el-form ref="form" :model="form" label-width="120px">
        <el-form-item label="Today Close">
            <el-input v-model="form.todayClose" precision="2" step="0.01" type="number" @change="getShowCalc"></el-input>
        </el-form-item>
        <el-form-item label="Front MA Price">
          <el-input v-model="form.frontPrice" precision="2" step="0.01" type="number" @change="getShowCalc"></el-input>
        </el-form-item>
        <el-link type="primary">ä¸€èˆ¬é€‰æ‹© 5 MA</el-link>
        <el-form-item label="Target MA Price">
            <el-input v-model="form.maPrice" type="number" step="0.01" @change="getShowCalc"></el-input>
        </el-form-item>
        <el-link type="primary">è‚¡ä¸€èˆ¬é€‰æ‹© 20 MA --------- ETF ä¸€èˆ¬é€‰ 30 MA ä¹Ÿå¯è¾“å…¥ 60 120</el-link>
        <el-form-item label="Target/Today Rate">
            <el-input v-model="todayMAPriceRateShow" disabled>
            </el-input>
        </el-form-item>
        <el-form-item label="Target/Front Rate">
            <el-input v-model="frontMAPriceRateShow" disabled>
            </el-input>
        </el-form-item>
        <el-link type="info">èµ·ï¼š{{getOriginalStartPrice(form.todayClose, frontMAPriceRate) }}<span style="margin-left: 15px;">æ­¢ï¼š{{getOriginalEndPrice(form.todayClose, frontMAPriceRate) }}</span></el-link>
        <el-link><span style="color:#F56C6C">ğŸ“‰ Open Sell Then this Rate Buy</span><span style="color: #e6a23c;">ğŸ“ˆ Open Buy Then this Rate Sell</span></el-link>
        <el-form-item label="Normal Stone Rate">
            <el-input v-model="frontMAPriceRateSet" disabled></el-input>
        </el-form-item>
        <el-link type="success">èµ·ï¼š{{getNormalStartPrice(form.todayClose, frontMAPriceRate/2) }}<span style="margin-left: 15px;">æ­¢ï¼š{{getNormalEndPrice(form.todayClose, frontMAPriceRate/2) }}</span></el-link>
        <el-link type="primary">æ­¤æ¯”ä¾‹ è®¾ç½®ç½‘æ ¼åˆé€‚ æ˜¯ Front MA Price ç”Ÿæˆï¼Œæ˜¯ Target/Front/2 </el-link>
        <el-link><span style="color:#F56C6C">ğŸ“‰ Open Sell Then this Rate Buy</span><span style="color: #e6a23c;">ğŸ“ˆ Open Buy Then this Rate Sell</span></el-link>
        <el-form-item label="Ratio Stone Rate">
            <el-input v-model="frontMAPriceRateRatioSetShow" disabled></el-input>
        </el-form-item>
        <el-link type="success">èµ·ï¼š{{getNormalStartPrice(form.todayClose, frontMAPriceRateRatioSet) }}<span style="margin-left: 15px;">æ­¢ï¼š{{getNormalEndPrice(form.todayClose, frontMAPriceRateRatioSet) }}</span></el-link>
        <el-link type="primary">æ­¤æ¯”ä¾‹ è®¾ç½®ç½‘æ ¼åˆé€‚ æ˜¯ Front MA Price ç”Ÿæˆï¼Œæ˜¯ Rate/{{this.bigRate + '-' + this.smallRate}})*(10-1) </el-link>
        <el-form-item label="Start Priod">
            <el-input v-model="rangeStart" disabled></el-input>
        </el-form-item>
        <el-link type="primary">åŒºé—´ä»·æ ¼ ç”± Today Close ç”Ÿæˆ ä¸ Target MA Price ç”Ÿæˆ</el-link>
        <el-form-item label="End Priod">
            <el-input v-model="rangeEnd" disabled></el-input>
        </el-form-item>
        <el-link type="primary">åŒºé—´ä»·æ ¼ ç”± Today Close ç”Ÿæˆ ä¸ Target MA Price ç”Ÿæˆ</el-link>
        <el-form-item label="Yesterday MACD">
            <el-input v-model="yesterdayMACD" type="number" step="0.001" precision="3" @change="changeMACD"></el-input>
        </el-form-item>
        <el-form-item label="Today MACD">
            <el-input v-model="todayMACD" type="number" step="0.001" precision="3" @change="changeMACD"></el-input>
        </el-form-item>
    </el-form>
    <el-descriptions title="æ€»ç»“">
        <el-descriptions-item label="æ—¥MACD">{{macdShow}}</el-descriptions-item>
        <el-descriptions-item label="çŠ¶æ€"><span :style="todayRateShowStyle">{{todayRateShowStatus}}</span></el-descriptions-item>
</div>
    <script src="https://cdn.bootcdn.net/ajax/libs/vue/2.7.9/vue.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/element-ui/2.15.13/index.min.js"></script>
    <script>
        new Vue({
        el: "#app",
        data: {
            form:{
                frontPrice:0,
                todayClose:0,
                maPrice:0,
            },
            todayMAPriceRate: 0,
            frontMAPriceRate: 0,
            todayMAPriceRateShow: 0,
            frontMAPriceRateShow: 0,
            frontMAPriceRateSet: 0,
            frontMAPriceRateRatioSet: 0,
            frontMAPriceRateRatioSetShow: 0,
                rangeStart: 0,
                rangeEnd: 0,
                yesterdayMACD:0,
                todayMACD:0,
                macdShow: '',
                bigRate:2.1,
                smallRate:1.9
        },
        computed:{
            todayRateShowStatus(){
                if(this.todayMAPriceRate > 0.1){
                    console.log(this.todayMAPriceRate);
                    return "Follow Buy [å¤§äº 10%]"
                } else if(this.todayMAPriceRate < -0.05) {
                    return  "Focus Sell [å°äº -5%]"
                }  else if(this.todayMAPriceRate < 0) {
                    return  "ä¸å»ºè®®åšT"
                }else{
                    return "è§‚æœ› æˆ– åš T"
                }
            },
            todayRateShowStyle(){
                    if(this.todayMAPriceRate > 0.1){
                    console.log(this.todayMAPriceRate);
                    return {
                        color: 'blue !important',
                        fontWeight: 'bold'
                    }
                } else if(this.todayMAPriceRate < -0.05 || this.todayRateShowStatus === 'ä¸å»ºè®®åšT') {
                    return  {
                        color: 'red !important',
                        fontWeight: 'bold',
                    }
                } else{
                    return {}
                }
            },
            getOriginalStartPrice(){
                return (start,factor)=>{
                    return Math.round((start * (1-Math.abs(factor)))*1000)/1000;
                }
            },
            getOriginalEndPrice(){
                return (start,factor)=>{
                    return Math.round((start * (1+Math.abs(factor)))*1000)/1000;
                }
            },
            getNormalStartPrice(){
                return (start,factor)=>{
                    return Math.round((start * (1-Math.abs(factor)))*1000)/1000;
                }
            },
            getNormalEndPrice(){
                return (start,factor)=>{
                    return Math.round((start * (1+Math.abs(factor)))*1000)/1000;
                }
            }
        },
        methods: {
            getShowCalc(){
                let {frontPrice,todayClose,maPrice} = this.form;
                frontPrice = Number(frontPrice);
                todayClose = Number(todayClose);
                maPrice = Number(maPrice);
                this.todayMAPriceRate = (maPrice - todayClose)/todayClose; 
                this.todayMAPriceRateShow = this.todayMAPriceRate * 100 + '%';
                this.frontMAPriceRate = (maPrice - frontPrice)/frontPrice;
                this.frontMAPriceRateShow = this.frontMAPriceRate * 100 + '%';
                this.frontMAPriceRateSet = this.frontMAPriceRate / 2 * 100 + '%';
                const frontMAPriceRateAbs = Math.abs(this.frontMAPriceRate) * 100;
                console.log(this.frontMAPriceRate)
                console.log(frontMAPriceRateAbs);
                const rate = (this.bigRate-this.smallRate)/(10-1);
                console.log(rate);
                console.log(this.smallRate+(frontMAPriceRateAbs - 1)*rate);
                const frontMAPriceRateRatio = this.frontMAPriceRate > 0.1 ? this.smallRate+((10-(frontMAPriceRateAbs-10)) - 1)*rate : this.smallRate+(frontMAPriceRateAbs - 1)*rate;
                console.log(frontMAPriceRateRatio)
                this.frontMAPriceRateRatioSet = this.frontMAPriceRate / frontMAPriceRateRatio;
                console.log(this.frontMAPriceRateRatioSet);
                this.frontMAPriceRateRatioSetShow = this.frontMAPriceRate / frontMAPriceRateRatio * 100 + '%';;
                console.log(this.frontMAPriceRateRatioSetShow);
                this.rangeStart = todayClose - todayClose * this.todayMAPriceRate;
                this.rangeEnd = todayClose + todayClose * this.todayMAPriceRate;
            },
            changeMACD(){
                const range = this.todayMACD - this.yesterdayMACD;
                this.macdShow = range > 0 ? 'MACD é€’å¢: ' +  range : 'MACD é€’å‡: ' + range;  
            }
        }
    });

    </script>
</body>

</html>

<style>
    #app{
        width: 100vm;
        height: 100vh;
        margin: 1.5vh 1.5vm;
    }
    .el-form-item{
        margin-bottom: 0.75rem;
    }
    .el-link{
        height: auto;
        line-height: initial;
        padding: .1875rem;
    }
</style>